# 해외선물 CCI 상품채널지수 전략 (Commodity Channel Index for Futures)

## 전략 ID
`FuturesCCI`

## 전략 기여자
ProgramGarden Team

## 간단한 설명

이 전략은 **"현재 가격이 평균에서 얼마나 벗어났는지"를 측정해서, 과매수/과매도 상태에 따라 롱 또는 숏을 추천하는 도구**입니다.

CCI가 -100 이하면 **반등을 기대해 롱**, +100 이상이면 **조정을 기대해 숏**을 제안합니다. 원래 상품(Commodity) 시장의 계절적 사이클을 파악하기 위해 개발되어, 농산물/에너지 선물에 특히 적합합니다.

## 📊 CCI 시각화

### CCI 신호 패턴

CCI가 -100 이하에서 상승하면 **롱**, +100 이상에서 하락하면 **숏** 신호입니다.

![CCI 신호](./images/cci_signals.png)

## 이 전략이 필요한 이유

- 선물 가격이 급등/급락했을 때 **"더 갈지, 꺾일지"** 판단이 어렵습니다.
- CCI는 **가격이 평균 대비 얼마나 극단적인지**를 객관적으로 보여줍니다.
- 상품 선물의 **순환적 특성(계절성)**을 반영하는 데 특히 유용합니다.

## 전략 상세 설명

### 먼저, 용어를 간단히 정리해 볼게요

- **전형가 (Typical Price)**
    - (고가 + 저가 + 종가) ÷ 3으로 계산합니다.
    - 그날 가격의 대표값입니다.

- **CCI (Commodity Channel Index)**
    - 전형가가 이동평균에서 얼마나 벗어났는지를 측정합니다.
    - **CCI > +100**: 과매수 (평균보다 많이 높음)
    - **CCI < -100**: 과매도 (평균보다 많이 낮음)
    - **CCI ≈ 0**: 평균 근처 (중립)

- **과매수/과매도**
    - 과매수: 가격이 비정상적으로 높아서, 조정받을 가능성
    - 과매도: 가격이 비정상적으로 낮아서, 반등할 가능성

### CCI 값 해석하기

| CCI 값 | 상태 | 의미 |
| --- | --- | --- |
| **> +200** | 극단적 과매수 | 매우 높은 가격, 숏 진입 고려 |
| **+100 ~ +200** | 과매수 | 높은 가격, 반전 대비 |
| **0 ~ +100** | 상승 추세 | 롱 유지 |
| **-100 ~ 0** | 하락 추세 | 숏 유지 또는 관망 |
| **-200 ~ -100** | 과매도 | 낮은 가격, 반전 대비 |
| **< -200** | 극단적 과매도 | 매우 낮은 가격, 롱 진입 고려 |

### 어떤 방식으로 포지션을 제안하나요?

| 상황 | 포지션 | 이유 |
| --- | --- | --- |
| **CCI ≤ -100 후 반등** | `long` (롱) | 과매도에서 탈출, 상승 기대 |
| **CCI ≥ +100 후 하락** | `short` (숏) | 과매수에서 탈출, 하락 기대 |
| **제로라인 상향 돌파** | `long` (롱) | 상승 추세 전환 |
| **제로라인 하향 돌파** | `short` (숏) | 하락 추세 전환 |

### 활용 시나리오

- 농산물/에너지 선물의 **순환적 사이클**을 포착하고 싶을 때
- 가격이 극단적일 때 **역추세 진입** 타이밍을 잡고 싶을 때
- 제로라인 돌파로 **추세 전환**을 확인하고 싶을 때

## DSL 예시

```python
{
    "condition_id": "FuturesCCI",
    "params": {
        "appkey": "발급받은 LS증권 키",
        "appsecretkey": "발급받은 LS증권 시크릿",
        "period": 20,
        "overbought": 100,
        "oversold": -100,
        "timeframe": "days",
        "qrycnt": 200
    }
}
```

## 파라미터 설명

| 이름 | 타입 | 기본값 | 설명 |
| --- | --- | --- | --- |
| `appkey` | str | - | LS증권에서 발급받은 Open API 키입니다. |
| `appsecretkey` | str | - | LS증권에서 발급받은 Open API 시크릿입니다. |
| `period` | int | 20 | CCI 계산 기간입니다. |
| `overbought` | float | 100.0 | 이 값 이상이면 과매수로 판단합니다. |
| `oversold` | float | -100.0 | 이 값 이하면 과매도로 판단합니다. |
| `timeframe` | str | "days" | 캔들 주기입니다. |
| `qrycnt` | int | 200 | 불러올 캔들 개수입니다. |

## 응답 데이터 설명

| 필드 | 설명 |
| --- | --- |
| `position_side` | **추천 포지션**입니다. `"long"`, `"short"`, `"flat"`, `"neutral"` 중 하나 |
| `zone` | 현재 CCI 영역입니다. `"overbought"`, `"oversold"`, `"neutral"` |
| `cci_value` | 현재 CCI 값입니다. |
| `current.typical_price` | 현재 전형가입니다. |
| `current.signal` | 현재 신호입니다. `"buy"`, `"sell"`, `"neutral"` |

## 농산물/상품 선물 심볼

| 상품 | 심볼 | 설명 |
| --- | --- | --- |
| 옥수수 | ZC=F | CBOT 옥수수 선물 |
| 대두 | ZS=F | CBOT 대두 선물 |
| 밀 | ZW=F | CBOT 밀 선물 |
| 커피 | KC=F | ICE 커피 선물 |
| 설탕 | SB=F | ICE 설탕 선물 |
| 코코아 | CC=F | ICE 코코아 선물 |

## 전략 활용 팁

1. **다이버전스**: 가격 신고가 + CCI 고점 하락 → 하락 전환 경고!
2. **계절성 고려**: 농산물은 파종/수확 시즌에 따라 CCI 해석이 달라질 수 있습니다.
3. **추세 확인**: CCI가 지속적으로 +100 이상 → 강한 상승 추세 지속

## 전략 사용 시 주의사항

- **강한 추세장에서는** CCI가 오랫동안 극단 영역에 머물 수 있습니다.
- 과매수/과매도 진입 시 **탈출 신호를 확인**한 후 진입하세요.
- 상품 선물은 **계절성**이 있으므로 시즌별 특성을 고려하세요.
- 선물은 레버리지가 있으므로 **손절 관리가 필수**입니다.
