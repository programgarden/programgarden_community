# 해외선물 베타 전략 (Beta for Futures)

## 전략 ID
`FuturesBeta`

## 전략 기여자
ProgramGarden Team

## 간단한 설명

이 전략은 **"이 선물이 시장 전체보다 얼마나 더 (또는 덜) 움직이는지"를 측정해서, 리스크 관리와 포트폴리오 구성을 도와주는 도구**입니다.

베타가 1보다 크면 **시장보다 더 출렁이는 공격적 자산**, 1보다 작으면 **시장보다 덜 출렁이는 방어적 자산**입니다. 시장이 상승할 것 같으면 고베타를, 하락할 것 같으면 저베타를 선택합니다.

## 📊 베타 시각화

### 베타에 따른 수익률 비교

시장이 +10% 상승할 때, 베타에 따라 자산의 수익률이 달라집니다.

![베타 비교](./images/beta_comparison.png)

## 이 전략이 필요한 이유

- 선물마다 **위험도가 다릅니다**. 어떤 것이 더 위험한지 알고 싶을 때!
- 시장이 오를 때 **더 많이 오르는 상품**을 찾고 싶을 때
- 포트폴리오의 **전체 리스크를 조절**하고 싶을 때

## 전략 상세 설명

### 먼저, 용어를 간단히 정리해 볼게요

- **베타 (Beta, β)**
    - "시장이 1% 움직일 때, 이 자산은 몇 % 움직이나?"를 측정한 숫자입니다.
    - **β = 1**: 시장과 똑같이 움직임
    - **β = 1.5**: 시장이 1% 오르면 이 자산은 1.5% 오름 (더 공격적)
    - **β = 0.5**: 시장이 1% 오르면 이 자산은 0.5% 오름 (더 방어적)
    - **β = -0.5**: 시장이 1% 오르면 이 자산은 0.5% **내림** (반대로 움직임)

- **벤치마크 (Benchmark)**
    - 비교 기준이 되는 시장입니다.
    - 보통 **S&P 500 선물(ES=F)**을 사용합니다.
    - "시장"이라고 하면 대개 이 벤치마크를 의미합니다.

- **상관계수 (Correlation)**
    - 두 자산이 **같은 방향으로 움직이는 정도**입니다.
    - **+1에 가까움**: 거의 같은 방향으로 움직임
    - **0**: 무관함
    - **-1에 가까움**: 반대 방향으로 움직임

### 베타 값 해석하기

| 베타 값 | 분류 | 의미 | 예시 |
| --- | --- | --- | --- |
| **β > 1.5** | 매우 공격적 | 시장의 1.5배 이상 움직임 | 레버리지 상품 |
| **β = 1.2~1.5** | 공격적 | 시장보다 많이 움직임 | 나스닥(NQ) |
| **β = 0.8~1.2** | 중립 | 시장과 비슷하게 움직임 | 다우(YM) |
| **β = 0~0.8** | 방어적 | 시장보다 적게 움직임 | 원자재 일부 |
| **β < 0** | 역상관 | 시장과 반대로 움직임 | 금(GC), 채권 |

### 어떤 방식으로 포지션을 제안하나요?

| 상황 | 포지션 | 이유 |
| --- | --- | --- |
| **고베타 (β > 1.2)** | `long` (롱) | 시장 상승 시 더 많이 오름 |
| **음베타 (β < 0)** | `short` (숏) | 헤지용 또는 역방향 베팅 |
| **저베타/중립** | `flat` (관망) | 특별한 방향성 없음 |

### 활용 시나리오

- **강세장 예상**: 고베타 선물(나스닥 등)로 수익 극대화
- **약세장 예상**: 저베타/음베타 선물로 방어
- **헤지**: 음베타 자산으로 기존 포지션 보호
- **상품 비교**: 여러 선물의 위험도 비교

## DSL 예시

```python
{
    "condition_id": "FuturesBeta",
    "params": {
        "appkey": "발급받은 LS증권 키",
        "appsecretkey": "발급받은 LS증권 시크릿",
        "period": 60,
        "benchmark_symbol": "ES=F",
        "high_beta_threshold": 1.2,
        "low_beta_threshold": 0.8,
        "timeframe": "days",
        "qrycnt": 200
    }
}
```

## 파라미터 설명

| 이름 | 타입 | 기본값 | 설명 |
| --- | --- | --- | --- |
| `appkey` | str | - | LS증권에서 발급받은 Open API 키입니다. |
| `appsecretkey` | str | - | LS증권에서 발급받은 Open API 시크릿입니다. |
| `period` | int | 60 | 베타 계산 기간 (일)입니다. |
| `benchmark_symbol` | str | "ES=F" | 비교 기준 벤치마크 심볼입니다. |
| `high_beta_threshold` | float | 1.2 | 이 값 이상이면 고베타로 분류합니다. |
| `low_beta_threshold` | float | 0.8 | 이 값 이하면 저베타로 분류합니다. |
| `timeframe` | str | "days" | 캔들 주기입니다. |
| `qrycnt` | int | 200 | 불러올 캔들 개수입니다. |

## 응답 데이터 설명

| 필드 | 설명 |
| --- | --- |
| `position_side` | **추천 포지션**입니다. `"long"`, `"short"`, `"flat"`, `"neutral"` 중 하나 |
| `beta` | 현재 베타 값입니다. |
| `correlation` | 벤치마크와의 상관계수입니다 (0~1). |
| `risk_category` | 리스크 분류입니다. `"high_beta"`, `"low_beta"`, `"neutral"`, `"negative_beta"` |
| `benchmark` | 사용된 벤치마크 심볼입니다. |

## 선물별 예상 베타 (vs S&P 500)

| 선물 | 심볼 | 예상 베타 | 특성 |
| --- | --- | --- | --- |
| 나스닥100 | NQ=F | 1.2~1.5 | 기술주 편향, 고베타 |
| 러셀2000 | RTY=F | 1.1~1.3 | 소형주, 중고베타 |
| 다우존스 | YM=F | 0.8~1.0 | 대형 우량주, 저베타 |
| 금 | GC=F | -0.1~0.3 | 안전자산, 약한 역상관 |
| 원유 | CL=F | 0.3~0.7 | 부분 상관, 자체 요인 큼 |
| 채권(10년) | ZN=F | -0.2~0.1 | 안전자산, 역상관 |

## 베타를 활용한 전략

### 1. 포트폴리오 베타 조절
```
강세장이 예상되면:
→ 나스닥(β=1.3) 비중 늘리기
→ 시장이 10% 오르면 나스닥은 13% 오를 수 있음!

약세장이 예상되면:
→ 금(β=-0.1) 비중 늘리기
→ 시장이 떨어져도 금은 덜 떨어지거나 오를 수 있음!
```

### 2. 헤지(위험 회피)
```
나스닥 롱 포지션이 있는데 시장 하락이 걱정되면:
→ 금 선물을 추가로 보유
→ 시장 하락 시 금이 손실을 일부 상쇄
```

## 전략 활용 팁

1. **시장 전망과 연결**: 상승장엔 고베타, 하락장엔 저베타
2. **상관계수 확인**: 베타만 보지 말고 상관계수도 같이 확인
3. **롤링 기간**: 기간에 따라 베타가 달라질 수 있음 (60일 vs 252일)
4. **분산 효과**: 서로 다른 베타의 자산을 섞으면 리스크 분산

## 전략 사용 시 주의사항

- 베타는 **과거 데이터 기반**이며, 미래를 보장하지 않습니다.
- **시장 상황이 바뀌면** 베타도 변할 수 있습니다.
- 선물은 **레버리지**가 있어서 실제 리스크는 더 클 수 있습니다.
- 계산 기간에 따라 **베타 값이 달라질 수 있으니** 여러 기간을 비교하세요.
