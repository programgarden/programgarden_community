# 해외선물 Williams %R 전략 (Williams %R for Futures)

## 전략 ID
`FuturesWilliamsR`

## 전략 기여자
ProgramGarden Team

## 간단한 설명

이 전략은 **"현재 가격이 최근 고점/저점 대비 어느 위치인지"를 측정해서, 과매수/과매도 상태에 따라 롱 또는 숏을 추천하는 도구**입니다.

Williams %R이 -80 이하면 **반등을 기대해 롱**, -20 이상이면 **조정을 기대해 숏**을 제안합니다. RSI와 유사하지만, 스케일이 반대(0 ~ -100)이고 더 민감하게 반응합니다.

## 📊 Williams %R 시각화

### Williams %R 신호 패턴

-80 이하에서 상승하면 **롱**, -20 이상에서 하락하면 **숏** 신호입니다.
(주의: 스케일이 0 ~ -100으로 RSI와 반대!)

![Williams %R 신호](./images/williams_r_signals.png)

## 이 전략이 필요한 이유

- 선물 시장에서 **단기 반전 타이밍**을 잡고 싶을 때 유용합니다.
- RSI보다 **더 민감하게** 과매수/과매도 상태를 감지합니다.
- 특히 **레인지 장세**에서 유용한 역추세 전략을 구현할 수 있습니다.

## 전략 상세 설명

### 먼저, 용어를 간단히 정리해 볼게요

- **Williams %R**
    - n일 동안의 최고가 대비 현재 가격의 위치를 측정합니다.
    - **%R = -20 이상**: 과매수 (최고가 근처)
    - **%R = -80 이하**: 과매도 (최저가 근처)
    - **%R = -50**: 중간 위치

- **과매수/과매도**
    - 과매수: 가격이 최근 범위의 상단에 있어서, 조정받을 가능성
    - 과매도: 가격이 최근 범위의 하단에 있어서, 반등할 가능성

- **RSI vs Williams %R**
    - 둘 다 과매수/과매도를 측정하지만 방식이 다릅니다.
    - RSI: 상승/하락 평균 비교 (0~100)
    - %R: 고점/저점 대비 위치 (0~-100)
    - %R이 더 민감하고 빠르게 반응합니다.

### Williams %R 값 해석하기

| %R 값 | 상태 | 의미 |
| --- | --- | --- |
| **-20 이상** | 과매수 | 최고가 근처, 숏 진입 고려 |
| **-20 ~ -50** | 중립~상승 | 적당히 높은 위치 |
| **-50** | 중간 | 범위의 정중앙 |
| **-50 ~ -80** | 중립~하락 | 적당히 낮은 위치 |
| **-80 이하** | 과매도 | 최저가 근처, 롱 진입 고려 |

### 어떤 방식으로 포지션을 제안하나요?

| 상황 | 포지션 | 이유 |
| --- | --- | --- |
| **%R ≤ -80 후 상향 돌파** | `long` (롱) | 과매도에서 탈출, 반등 기대 |
| **%R ≥ -20 후 하향 돌파** | `short` (숏) | 과매수에서 탈출, 하락 기대 |
| **-50선 상향 돌파** | `long` (롱) | 상승 모멘텀 |
| **-50선 하향 돌파** | `short` (숏) | 하락 모멘텀 |

### 활용 시나리오

- **레인지 장세**에서 역추세 매매를 하고 싶을 때
- RSI보다 **빠른 신호**를 받고 싶을 때
- 단기 **스윙 트레이딩** 타이밍을 잡을 때

## DSL 예시

```python
{
    "condition_id": "FuturesWilliamsR",
    "params": {
        "appkey": "발급받은 LS증권 키",
        "appsecretkey": "발급받은 LS증권 시크릿",
        "period": 14,
        "overbought": -20,
        "oversold": -80,
        "timeframe": "days",
        "qrycnt": 200
    }
}
```

## 파라미터 설명

| 이름 | 타입 | 기본값 | 설명 |
| --- | --- | --- | --- |
| `appkey` | str | - | LS증권에서 발급받은 Open API 키입니다. |
| `appsecretkey` | str | - | LS증권에서 발급받은 Open API 시크릿입니다. |
| `period` | int | 14 | Williams %R 계산 기간입니다. |
| `overbought` | float | -20.0 | 이 값 이상이면 과매수로 판단합니다. |
| `oversold` | float | -80.0 | 이 값 이하면 과매도로 판단합니다. |
| `timeframe` | str | "days" | 캔들 주기입니다. |
| `qrycnt` | int | 200 | 불러올 캔들 개수입니다. |

## 응답 데이터 설명

| 필드 | 설명 |
| --- | --- |
| `position_side` | **추천 포지션**입니다. `"long"`, `"short"`, `"flat"`, `"neutral"` 중 하나 |
| `zone` | 현재 %R 영역입니다. `"overbought"`, `"oversold"`, `"neutral"` |
| `williams_r` | 현재 Williams %R 값입니다. |
| `current.signal` | 현재 신호입니다. `"buy"`, `"sell"`, `"neutral"` |
| `highest_high` | n일 기간 최고가입니다. |
| `lowest_low` | n일 기간 최저가입니다. |

## RSI vs Williams %R 비교

| 항목 | RSI | Williams %R |
| --- | --- | --- |
| 범위 | 0 ~ 100 | 0 ~ -100 |
| 과매수 | 70 이상 | -20 이상 |
| 과매도 | 30 이하 | -80 이하 |
| 계산 | 상승/하락 평균 | 고점 대비 위치 |
| 민감도 | 중간 | 높음 (더 빠름) |

## 통화 선물 심볼 예시

| 상품 | 심볼 | 설명 |
| --- | --- | --- |
| 유로 FX | 6E=F | 유로/달러 선물 |
| 일본 엔 | 6J=F | 엔/달러 선물 |
| 영국 파운드 | 6B=F | 파운드/달러 선물 |
| 호주 달러 | 6A=F | 호주달러/달러 선물 |
| 캐나다 달러 | 6C=F | 캐나다달러/달러 선물 |
| 스위스 프랑 | 6S=F | 스위스프랑/달러 선물 |

## 전략 활용 팁

1. **페일러 스윙**: %R이 -80 이하 도달 후 반등 → 다시 -80 이하 미도달 후 상승 → 강력한 매수 신호!
2. **다이버전스**: 가격 신저가 + %R 저점 상승 → 상승 전환 경고
3. **%R 50선**: -50 위/아래로 모멘텀 방향 확인

## 전략 사용 시 주의사항

- %R은 **매우 민감해서** 노이즈가 많을 수 있습니다.
- 강한 추세장에서는 오랫동안 **극단 영역에 머물 수 있습니다**.
- **레인지 장세**에서 가장 효과적이며, 추세장에서는 추세 지표와 병행하세요.
- 과매수/과매도 영역 **탈출을 확인한 후** 진입하세요.
