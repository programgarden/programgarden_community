# SMA 골든/데드 크로스 전략

## 전략 ID
SMAGoldenDeadCross

## 설명 요약

`SMAGoldenDeadCross`는 해외 주식에서 단순 이동 평균(Simple Moving Average, SMA)의 골든 크로스와 데드 크로스를 감지하는 조건 기반 전략입니다. 데드 크로스 후 골든 크로스가 발생하고, 골든 크로스 시점의 가격이 데드 크로스 시점보다 높은 경우를 찾아 매수 신호를 제공합니다. 

## 전략 설명

![SMA 골든/데드 크로스 예시](https://cafeptthumb-phinf.pstatic.net/MjAyNTEwMDhfMjIy/MDAxNzU5ODUwNzc2Nzc4.T8jOgSjpbDQPU0Q35UEgKanVbNFX-FCGsLZq9iZya_cg.-AvHSunDeWxif-pjCZsqp0wbdnIal20Cn4VF3rZ1fSMg.PNG/%EA%B3%A8%EB%93%A0_%EB%8D%B0%EB%93%9C.png?type=w1600)

주식 가격은 매일 변동합니다. 이 전략은 가격의 '단순 이동 평균'(SMA)을 사용해 추세를 파악합니다. SMA는 일정 기간 동안의 가격 평균을 계산한 거예요. 예를 들어, 20일 SMA는 최근 20일 가격의 평균입니다.

- **골든 크로스**: 단기 SMA(예: 20일)가 장기 SMA(예: 50일)를 위로 교차할 때 발생. 상승 추세의 시작을 의미합니다.
- **데드 크로스**: 단기 SMA가 장기 SMA 아래로 교차할 때. 하락 추세의 시작을 의미합니다.

이 전략은 데드 크로스(하락 신호) 이후에 골든 크로스(상승 신호)가 나타나고, 골든 크로스 때의 가격이 데드 크로스 때보다 높아진 경우만 선택합니다. 이렇게 하면 더 신뢰할 수 있는 매수 타이밍을 찾을 수 있어요. 해외 주식 시장의 변동성이 크기 때문에, 이런 자동화된 신호가 감정적 판단을 줄여줍니다.

### 골든 크로스 시각화 예시

골든 크로스를 이해하기 위해, 가상의 가격 데이터로 예시를 들어볼게요. 단기 SMA(20일)와 장기 SMA(50일)을 계산합니다.

#### 샘플 데이터 (가격: 100일간의 가상 데이터)

| 일자 | 가격 | 20일 SMA | 50일 SMA | 상태          |
|------|------|----------|----------|---------------|
| 1    | 100  | -        | -        | -             |
| ...  | ...  | ...      | ...      | ...           |
| 20   | 95   | 97.5     | -        | -             |
| ...  | ...  | ...      | ...      | ...           |
| 50   | 90   | 93.2     | 95.0     | 데드 크로스 (단기 < 장기) |
| ...  | ...  | ...      | ...      | ...           |
| 60   | 105  | 98.5     | 96.8     | 골든 크로스 (단기 > 장기) |

- **데드 크로스**: 50일째에 단기 SMA(93.2)가 장기 SMA(95.0) 아래로 내려감. 가격이 떨어지기 시작하는 신호.
- **골든 크로스**: 60일째에 단기 SMA(98.5)가 장기 SMA(96.8) 위로 올라감. 가격이 오르기 시작하는 신호.
- 전략은 데드 크로스 후 골든 크로스가 발생하고, 골든 크로스 가격(105)이 데드 크로스 가격(90)보다 높은 경우를 감지합니다. 이렇게 하면 바닥에서 반등하는 타이밍을 잡을 수 있어요.

### DSL에 작성하는 방법
```python
{
    "condition_id": "SMAGoldenDeadCross",
    "parameters": {
        "start_date": "20230101",
        "end_date": "20231231",
        "long_period": 50,
        "short_period": 20,
        "time_category": "days",
        "use_ls": True,
        "alignment": "golden",
        "appkey": "your_appkey",
        "appsecretkey": "your_appsecretkey"
    }
}

```

#### 데이터 설명
- `start_date`: 분석 시작 날짜 (예: "20230101").
- `end_date`: 분석 종료 날짜 (예: "20231231")
- `long_period`: 장기 SMA 기간 (예: 50일)
- `short_period`: 단기 SMA 기간 (예: 20일)
- `time_category`: 시간 단위 (일/주/달) (예: "days" 또는 "months" 또는 "weeks")
- `days_prices`: 직접 가격 데이터를 제공하고 싶은 경우에만 넣습니다. (비개발자는 무시하세요)
- `use_ls`: LS증권 데이터를 사용하기에 True로 맞춰주세요. (예: True)
- `alignment`: 감지할 크로스 종류 (예: "golden" 또는 "dead").
- `appkey`: LS증권 API 앱키.
- `appsecretkey`: LS증권 API 앱시크릿키.

#### 동작 방식
1. LS증권 API를 통해 지정된 기간의 차트 데이터를 가져옵니다.
2. 데이터를 날짜순으로 정렬하고, SMA를 계산합니다.
3. 각 데이터 포인트에서 골든 크로스(단기 > 장기) 또는 데드 크로스(단기 < 장기)를 감지합니다.
4. 조건을 만족하는 신호를 필터링합니다:
   - 데드 크로스 후 골든 크로스가 발생.
   - 골든 크로스 가격 > 데드 크로스 가격.
   - 골든 크로스가 최근 2 데이터 포인트 내에 발생 (최신 신호).
   - 현재 상태가 골든 크로스 유지.
5. 감지된 신호 목록을 반환합니다.


## 주의사항

- 이 전략은 과거 데이터 분석에 기반하며, 미래 성과를 보장하지 않습니다.
- SMA 기간은 시장 상황과 종목 특성에 따라 조정해야 합니다.
- API 키는 안전하게 관리해야 하며, 실제 투자 시 유효한 키를 사용하세요.